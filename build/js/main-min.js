"use strict";function ObjAd(e,t){var i=e;document.querySelector(t).innerHTML=i}if(jQuery.fn.exists=function(){return $(this).length},$("#aside").exists())try{var adObj='<div class="call-help call-help--search"><div class="call-help__bloc"><div class="call-help__container"><div class="call-help__article">Не хочу искать, перезвоните мне</div>\n            <form class="form-project form-project--call" method="get"><div class="form-project__wrapper"><div class="form-project__box"><div class="form-project__group">\n            <div class="form-project__block"><input class="form-project__field" placeholder="Ваше имя" type="text" required></div><div class="form-project__block"><input class="form-project__field" placeholder="Ваша почта" type="text" required>\n            </div></div></div><div class="form-project__link">Нажимая кнопку, Вы принимаете условия <a href="javascript:void(0)">пользовательского соглашения.</a></div>\n            </div><button class="form-project__btn" type="submit" disabled><div class="btn__txt">жду звонка</div></button></form></div></div>',breakpoint=window.matchMedia("(min-width:769px)");!0===breakpoint.matches?ObjAd(adObj,"#aside"):ObjAd(adObj,"#insert")}catch(e){console.log(e)}$(function(){function e(e,t,i,o,s,n){if($(e).exists())try{var r=document.querySelector(e);noUiSlider.create(r,{start:[t,i],connect:!0,step:o,format:wNumb({decimals:0}),range:{min:t,max:i}});var a=$(e).closest(n),l=[$(a).find(".building-filter__up"),$(a).find(".building-filter__low")];return r.noUiSlider.on("update",function(e,t){$(l[t]).text(e[t]),$(s).val(e)}),r}catch(e){console.log(e)}}function t(e,t,i){var o=$(t).closest(".flats-calc__item").find(".flats-calc__block").data("min");return""!=$(e).val()&&(o=(o=(o=$(i).val()).split(","))[0]),o}function i(e,i,s,n){$(e).exists()&&(o(t(e,"#price","#send-result-price"),t(e,"#donat","#send-result-donat"),t(e,"#period","#send-result-period"),t(e,"#savings","#send-result-savings")),$(e).on("change",function(){$(this).val()>s?(n.noUiSlider.set(s),$(this).val(s)):$(this).val()<i||0==$(this).val()?(n.noUiSlider.set(i),$(this).val(i)):n.noUiSlider.set($(this).val()),n.noUiSlider.set([this.value,null]),n.noUiSlider.on("update",function(t,i){$(e).val(t[0])}),o(t(e,"#price","#send-result-price"),t(e,"#donat","#send-result-donat"),t(e,"#period","#send-result-period"),t(e,"#savings","#send-result-savings"))}),n.noUiSlider.on("slide",function(i,s){$(e).val(i[0]),o(t(e,"#price","#send-result-price"),t(e,"#donat","#send-result-donat"),t(e,"#period","#send-result-period"),t(e,"#savings","#send-result-savings"))}),"#flats-savings"===e&&n.noUiSlider.set(s))}function o(e,t,i){var o,s=0,n=0,r=12*i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o=e-t,$('[data-name="savings"]').prop("checked")?(n=(n=4.85/12/100*Math.pow(1+4.85/12/100,r)/(Math.pow(1+4.85/12/100,r)-1)).toFixed(5),o=o-(a-(o*(4.85/12/100)*(30/365)+(s=Math.ceil(n*o))))-s,n=4.85/12/100*Math.pow(1+4.85/12/100,r)/(Math.pow(1+4.85/12/100,r)-1),s=Math.ceil(n*o)):(n=(n=4.85/12/100*Math.pow(1+4.85/12/100,r)/(Math.pow(1+4.85/12/100,r)-1)).toFixed(5),s=Math.ceil(n*o),$("#calc-rezult").val(s))}if(ScrollReveal({mobile:!1}),$("#price").exists()){var s=$("#price").closest(".flats-calc__item").find(".flats-calc__block").data("min"),n=$("#price").closest(".flats-calc__item").find(".flats-calc__block").data("max"),r=e("#price",s,n,1e4,"#send-result-price",".flats-calc__item");$("#flat-price").val(s),i("#flat-price",s,n,r)}if($("#donat").exists()){var a=$("#donat").closest(".flats-calc__item").find(".flats-calc__block").data("min"),l=$("#donat").closest(".flats-calc__item").find(".flats-calc__block").data("max"),c=e("#donat",a,l,1e3,"#send-result-donat",".flats-calc__item");$("#flats-donat").val(a),i("#flats-donat",a,l,c)}if($("#period").exists()){var d=$("#period").closest(".flats-calc__item").find(".flats-calc__block").data("min"),p=$("#period").closest(".flats-calc__item").find(".flats-calc__block").data("max"),u=e("#period",d,p,1,"#send-result-period",".flats-calc__item");$("#flats-period").val(d),i("#flats-period",d,p,u)}if($("#savings").exists()){var f=$("#savings").closest(".flats-calc__item").find(".flats-calc__block").data("min"),_=$("#savings").closest(".flats-calc__item").find(".flats-calc__block").data("max"),h=e("#savings",f,_,1,"#send-result-savings",".flats-calc__item");$("#flats-savings").val(_),i("#flats-savings",f,_,h)}if($("#submit").on("click",function(e){e.preventDefault(),console.log($(".building-filter--second-flats"))}),$('[data-name="savings"]').on("click",function(){$(this).prop("checked")?($(".flats-calc__row--savings").addClass("flats-calc__row--active"),o(t("#flat-price","#price","#send-result-price"),t("#flats-donat","#donat","#send-result-donat"),t("#flats-period","#period","#send-result-period"),t("#flats-savings","#savings","#send-result-savings"))):$(".flats-calc__row--savings").removeClass("flats-calc__row--active")}),$(".form-project--call").exists()){$(".form-project__field").each(function(){$(this).on("input change",function(){var e;e=0,$(".form-project__field").each(function(){""==$(this).val()&&e++}),0==e?$(".form-project__btn").prop("disabled",!1):$(".form-project__btn").prop("disabled",!0)})})}if($("#plan-slider").exists())try{new Swiper("#plan-slider",{spaceBetween:20,slidesPerView:"auto",loop:!0,autoHeight:!0,navigation:{nextEl:".index-project__link--pf_next",prevEl:".index-project__link--pf_prev"},pagination:{el:".project-period__pagination",clickable:!0},breakpoints:{1920:{spaceBetween:20,slidesPerView:4},1025:{spaceBetween:20,slidesPerView:4},1024:{slidesPerView:2,spaceBetween:20},993:{slidesPerView:2,spaceBetween:20},992:{slidesPerView:1.4,spaceBetween:20},769:{slidesPerView:1.4,spaceBetween:20},768:{slidesPerView:2,spaceBetween:20},621:{slidesPerView:2,spaceBetween:20},620:{slidesPerView:1,spaceBetween:20},320:{slidesPerView:1,spaceBetween:20}}})}catch(e){console.log(e)}if($(".certificate__slider").exists())try{new Swiper(".certificate__slider",{spaceBetween:24,slidesPerView:5,touchRatio:0,slidesPerColumn:2,slidesPerColumnFill:"row",autoplay:{delay:3e3},breakpoints:{1025:{slidesPerView:5,spaceBetween:24},1024:{slidesPerView:4,spaceBetween:24,touchRatio:1},641:{slidesPerView:4,spaceBetween:24,touchRatio:1},640:{slidesPerView:3,spaceBetween:24,touchRatio:1},501:{slidesPerView:3,spaceBetween:24,touchRatio:1},500:{slidesPerView:2,spaceBetween:10,touchRatio:1,slidesPerColumn:1},320:{slidesPerView:2,spaceBetween:10,touchRatio:1,slidesPerColumn:1}}})}catch(e){console.log(e)}if($(".partner__slider").exists())try{new Swiper(".partner__slider",{spaceBetween:110,slidesPerView:"auto",loop:!0,autoplay:{delay:5e3},breakpoints:{1920:{spaceBetween:110,slidesPerView:"auto"},1301:{spaceBetween:110,slidesPerView:"auto"},1300:{spaceBetween:40,slidesPerView:4,loop:!1},1025:{spaceBetween:40,slidesPerView:4},1024:{slidesPerView:4,spaceBetween:40,slidesPerColumn:2,slidesPerColumnFill:"row",touchRatio:0},769:{slidesPerView:4,spaceBetween:40,slidesPerColumn:2,slidesPerColumnFill:"row",touchRatio:0},768:{slidesPerView:3,spaceBetween:18,slidesPerColumn:2,slidesPerColumnFill:"row",touchRatio:0},501:{slidesPerView:3,spaceBetween:18,slidesPerColumn:2,slidesPerColumnFill:"row",touchRatio:0},500:{slidesPerView:2,spaceBetween:18,slidesPerColumn:3,slidesPerColumnFill:"row",touchRatio:0},320:{slidesPerView:2,spaceBetween:18,slidesPerColumn:3,slidesPerColumnFill:"row",touchRatio:0}}})}catch(e){console.log(e)}if($(".slider-flats").exists())try{new Swiper(".slider-flats",{slidesPerView:1,spaceBetween:10,touchRatio:0,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".slider-flats__pagination",clickable:!0,renderBullet:function(e,t){return'<span class="'+t+'">'+(e+1)+"</span>"}},navigation:{nextEl:".slider-flats__arrow--next",prevEl:".slider-flats__arrow--prev"}})}catch(e){console.log("Ошибка "+e.name+":"+e.message+"\n"+e.stack)}$("#cost").exists()&&e("#cost",$("#cost").closest(".building-filter__col").find(".building-filter__range").data("min"),$("#cost").closest(".building-filter__col").find(".building-filter__range").data("max"),1e5,"#send-result-сost",".building-filter__col");$("#area").exists()&&e("#area",$("#area").closest(".building-filter__col").find(".building-filter__range").data("min"),$("#area").closest(".building-filter__col").find(".building-filter__range").data("max"),10,"#send-result-area",".building-filter__col");if($(".burger-filter").exists()&&$(".burger-filter").on("click",function(){$(this).toggleClass("burger-filter--active"),$(".building-filter").toggleClass("building-filter--active")}),$(".project-period__list").exists()&&$(".project-period__list").mCustomScrollbar({theme:"dark",mouseWheelPixels:90}),$(window).on("resize load",function(){$(".structure__menu").width($(".structure__items").width())}),$(".structure__right").exists)try{var m=$(window),w=$("#map-projects"),g=w.offset().top;m.on("scroll",function(){if((window.pageYOffset||document.documentElement.scrollTop)>g){w.addClass("map-fixed");var e=$(window).scrollTop(),t=$(window).height(),i=$(".structure__note").offset().top,o=$(".structure__note").outerHeight(),s=$(document).height();e+t>=i||t+e==s||o+i<t?($("#map-projects").removeClass("map-fixed"),$(".structure__inner").addClass("map-end")):($("#map-projects").addClass("map-fixed"),$(".structure__inner").removeClass("map-end"))}else w.removeClass("map-fixed")})}catch(e){console.log(e)}if($(".filter-menu").length>0){var v,k,x,b=$(".structure__menu li")[$(".group li").length-1];$(b).find("a").css("padding-right","0px"),$("#example-one").append("<li id='magic-line'></li>");var j=$("#magic-line");j.width($(".current_page_item").width()).css("left",$(".current_page_item a").position().left).data("origLeft",j.position().left).data("origWidth",j.width()),$("#example-one li a").on("click",function(){v=$(this),k=v.position().left,x=v.parent().width(),j.stop().animate({left:k,width:x})}),$(".filter-menu li").each(function(){$(this).on("click",function(){$(this).find("input").prop("checked",!0),$(this).find("input").is(":checked")&&$(this).addClass("current_page_item").siblings().removeClass("current_page_item")})})}if(lightGallery(document.getElementById("lightgallery-cer")),lightGallery(document.getElementById("certificate__gallery")),$(".index-content__txt").exists())try{for(var y=document.querySelectorAll(".index-content__txt"),C=0;C<y.length;C++)$clamp(y[C],{clamp:4,useNativeClamp:!1})}catch(e){console.log(e)}if($(".index-slider").exists())try{new Swiper(".index-slider",{slidesPerView:1,spaceBetween:10,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".swiper-pagination",clickable:!0},touchRatio:0,breakpoints:{1920:{slidesPerView:1,spaceBetween:10},640:{slidesPerView:1,spaceBetween:10,touchRatio:1},320:{slidesPerView:1,spaceBetween:10,touchRatio:1}}})}catch(e){console.log(e)}if($(".index-project__content").exists()&&$(".index-project__img").exists())try{var P=new Swiper(".index-project__content",{slidesPerView:1,spaceBetween:10,effect:"fade",fadeEffect:{crossFade:!0},pagination:{el:".project-pagination",clickable:!0}}),V=new Swiper(".index-project__img",{slidesPerView:1,spaceBetween:10,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".index-project__link--next",prevEl:".index-project__link--prev"}});P.controller.control=V,V.controller.control=P,$(".swiper-wrapper").resize(function(){$(".index__special").height($(".index-content").height())})}catch(e){console.log("Ошибка "+e.name+":"+e.message+"\n"+e.stack)}if($(".inner-slider").exists())try{new Swiper(".inner-slider",{slidesPerView:1,spaceBetween:10,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".inner-slider__link--next",prevEl:".inner-slider__link--prev"},pagination:{el:".inner-slider__num",type:"custom",renderCustom:function(e,t,i){return"<span>".concat((""+(t||0)).slice(-2),"</span>")+"/<span>".concat((""+i).slice(-2),"</span>")}}})}catch(e){console.log("Ошибка "+e.name+":"+e.message+"\n"+e.stack)}if($(".index-project__example").exists())try{new Swiper(".index-project__example",{slidesPerView:3,spaceBetween:20,effect:"slide",loop:!0,fadeEffect:{crossFade:!0},navigation:{nextEl:".index-project__arr--next",prevEl:".index-project__arr--prev"}})}catch(e){console.log(e)}if($(".index-certificate__cer").exists())try{new Swiper(".index-certificate__cer",{slidesPerView:4,spaceBetween:42,effect:"slide",loop:!0,autautoplay:{delay:1e3,disableOnInteraction:!1},fadeEffect:{crossFade:!0},navigation:{nextEl:".index-project__arr--snext",prevEl:".index-project__arr--sprev"},breakpoints:{922:{slidesPerView:4,spaceBetween:42,autoplay:!1},769:{slidesPerView:4,spaceBetween:42,autoplay:!1},768:{slidesPerView:3,spaceBetween:42,autoplay:!1},601:{autoplay:!1},501:{slidesPerView:3,spaceBetween:42},500:{slidesPerView:2,spaceBetween:8},320:{slidesPerView:2,spaceBetween:8}}})}catch(e){console.log(e)}if($(".index-example__slider").exists())try{new Swiper(".index-example__slider",{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{nextEl:".index-project__arr--ex_next",prevEl:".index-project__arr--ex_prev"},pagination:{el:".inner-slider__num--example",type:"custom",renderCustom:function(e,t,i){return"<span>".concat((""+(t||0)).slice(-2),"</span>")+"/<span>".concat((""+i).slice(-2),"</span>")}}})}catch(e){console.log(e)}if($(".index-news__slider").exists())try{new Swiper(".index-news__slider",{slidesPerView:"auto",spaceBetween:40,loop:!0,pagination:{el:".index-news__pagination",type:"progressbar"}})}catch(e){console.log(e)}if($(".index__slider").exists())try{var B,E=window.matchMedia("(min-width:641px)"),M=function(){if(!0!==E.matches)return!1===E.matches?S():void 0;void 0!==B&&B.destroy(!0,!0)},S=function(){B=new Swiper(".index__slider",{slidesPerView:1,spaceBetween:16,a11y:!0,keyboardControl:!0,grabCursor:!0,effect:"slide",slidesPerColumn:3,pagination:{el:".index__pag",clickable:!0},breakpoints:{1920:{slidesPerColumn:3,spaceBetween:16},640:{slidesPerColumn:1,slidesPerView:1,spaceBetween:16},320:{slidesPerColumn:1,slidesPerView:1,spaceBetween:16}}})};E.addListener(M),M()}catch(e){console.log(e)}if($(".button").exists())try{!function(){for(var e=document.querySelectorAll(".button"),t=function(t){e[t].addEventListener("mousemove",function(i){var o=i;this.classList.add("button-bg"),function(e,t){var i=e.getBoundingClientRect(),o=t.clientX-i.left-90,s=t.clientY-i.top-90;e.style.backgroundPosition="0 0,0 0,"+o+"px "+s+"px,0 0"}(e[t],o)}),e[t].addEventListener("mouseleave",function(){this.classList.remove("button-bg")})},i=0;i<e.length;i++)t(i)}()}catch(e){console.log(e)}function z(e,t){var i=$(e).height();$(t).css({height:i+"px"})}function H(e){var t=e[0].getBoundingClientRect();return{top:t.top+pageYOffset,bottom:t.bottom+pageYOffset}}if($(".index-certificate__unique").exists()&&(z("#lightgallery-cer .swiper-slide",".index-certificate__unique"),$(window).on("resize load",function(){z("#lightgallery-cer .swiper-slide",".index-certificate__unique")})),$(".certificate__cover").exists()&&(z(".certificate__slider ",".certificate__cover"),$(window).on("resize load",function(){z(".certificate__slider ",".certificate__cover")})),$(".index-example").exists()&&ne(".index-example"),$(".index-inner").exists()&&ne(".index-inner"),$(window).on("load",function(){$(this).width()>=620&&$("[data-floor]").each(function(){$(this).on("mousemove",function(){var e=H($(this));H($(".object__inner")),$(".module").addClass("module--active");var t=$(this)[0].getBoundingClientRect().height;$(".module").css("top",e.top-$(".header").height()-t/2.9)}),$(this).on("mouseleave",function(){$(".module").removeClass("module--active")})})}),$("#map-flat").exists()){var R=[];mapboxgl.accessToken="pk.eyJ1IjoiYWRtaW5zaW5haSIsImEiOiJja2N2czJ2ejcwNzdoMzBtbDVneTh6NTNkIn0.pkiEoq-UDjbqvdDrB_zZCQ";var F=!1,N=new mapboxgl.Map({container:"map-flat",style:"mapbox://styles/mapbox/light-v10",center:[58.98555,53.37712],zoom:15.5});N.scrollZoom.disable(),N.dragPan.disable(),N.addControl(new mapboxgl.NavigationControl);[{type:"Feature",geometry:{type:"Point",coordinates:[58.98555,53.37712]},properties:{title:"Магазин",icon:{iconUrl:"../img/icon/marker/house.png",iconSize:[118,118],iconAnchor:[25,25],popupAnchor:[0,-25],className:"marker"}}}].forEach(function(e){var t=document.createElement("div"),i=(new DOMParser).parseFromString('<svg width="118" height="118" viewBox="0 0 118 118" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="rect" y="59" width="83.4386" height="83.4386" transform="rotate(-45 0 59)" fill="#40424C"/><path d="M68.2258 75.368V45.0131C68.2258 44.0275 67.4259 43.2275 66.4402 43.2275H52.1556C51.1699 43.2275 50.37 44.0275 50.37 45.0131V75.368" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>                <path d="M50.3699 53.9409H43.2276C42.242 53.9409 41.442 54.7409 41.442 55.7265V75.3679" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>                <path d="M77.1537 75.3679V55.7265C77.1537 54.7409 76.3538 53.9409 75.3682 53.9409H68.2258" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M54.8339 68.2256H63.7618" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M61.9763 68.2256V75.3679" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M56.6195 75.3679V68.2256" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M55.7267 56.6194H62.869" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M55.7267 61.976H62.869" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M55.7267 51.2627H62.869" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.7988 61.976H50.37" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.7988 68.2256H50.37" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M68.2258 61.976H71.797" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M68.2258 68.2256H71.797" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> <path d="M78.9393 75.3679H39.6565" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',"application/xml");t.appendChild(t.ownerDocument.importNode(i.documentElement,!0)),t.className="marker",t.style.width=e.properties.icon.iconSize[0]+"px",t.style.height=e.properties.icon.iconSize[1]+"px",t.addEventListener("click",function(){N.flyTo({center:e.geometry.coordinates})}),$(t).hover(function(){$(this).toggleClass("marker--active")}),R.push(t),new mapboxgl.Marker(t).setLngLat(e.geometry.coordinates).addTo(N)});var T=0;if($(".structure__item").length>0){var q=function(e){return N.flyTo({center:A[e],essential:!0}),N.fire("flystart"),e},A=[];$(".structure__item").each(function(e){R[e].setAttribute("data-href",$(this).data("href")),null!=$(this).data("coordinates")&&A.push($(this).data("coordinates")),$(this).hover(function(){q(e),T=q(e)})}),N.on("moveend",function(e){if(F){R[T].classList.add("marker--active");for(var t=0;t<R.length;t++)t!=T&&R[t].classList.remove("marker--active");N.fire("flyend")}}),N.on("flystart",function(){F=!0}),N.on("flyend",function(){F=!1})}}if($("#map").length>0){var O=function(){for(var e=[],t=0;t<J.length;t++)J[t].checked&&e.push(J[t].value);W.clearLayers(),U.eachLayer(function(t){console.log(t.feature.properties.name),-1!==e.indexOf(t.feature.properties.name)&&alert(1)})};L.mapbox.accessToken="pk.eyJ1IjoiYWRtaW5zaW5haSIsImEiOiJja2N2czJ2ejcwNzdoMzBtbDVneTh6NTNkIn0.pkiEoq-UDjbqvdDrB_zZCQ";var U,I=L.mapbox.map("map").setView([53.37712,58.98555],17).addLayer(L.mapbox.styleLayer("mapbox://styles/mapbox/light-v10")),W=L.layerGroup().addTo(I);L.mapbox.featureLayer().loadURL("./js/stations.geojson").on("ready",function(e){U=e.target,O()});var D=document.getElementById("colors");console.log(D);for(var J=D.querySelectorAll("input"),Y=0;Y<J.length;Y++)J[Y].addEventListener("click",O)}if($("#map-projects").length>0){var Z=[];mapboxgl.accessToken="pk.eyJ1IjoiYWRtaW5zaW5haSIsImEiOiJja2N2czJ2ejcwNzdoMzBtbDVneTh6NTNkIn0.pkiEoq-UDjbqvdDrB_zZCQ";var Q=!1,G=new mapboxgl.Map({container:"map-projects",style:"mapbox://styles/mapbox/light-v10",center:[58.98555,53.37712],zoom:15.9});G.scrollZoom.disable();var X=new mapboxgl.NavigationControl({showCompass:!1,showZoom:!0});G.addControl(X,"top-left");[{type:"Feature",geometry:{type:"Point",coordinates:[58.98555,53.37712]},properties:{title:"Магазин",icon:{iconUrl:"../img/icon/marker/house.png",iconSize:[118,118],iconAnchor:[25,25],popupAnchor:[0,-25],className:"marker"}}},{type:"Feature",geometry:{type:"Point",coordinates:[59.089068,53.37959]},properties:{title:"Школа",icon:{iconUrl:"../img/icon/marker/house.png",iconSize:[118,118],iconAnchor:[25,25],popupAnchor:[0,-25],className:"marker"}}},{type:"Feature",geometry:{type:"Point",coordinates:[58.98631,53.375217]},properties:{title:"Школа",icon:{iconUrl:"../img/icon/marker/house.png",iconSize:[118,118],iconAnchor:[25,25],popupAnchor:[0,-25],className:"marker"}}}].forEach(function(e){var t=document.createElement("div"),i=(new DOMParser).parseFromString('<svg width="118" height="118" viewBox="0 0 118 118" fill="none" xmlns="http://www.w3.org/2000/svg"><rect class="rect" y="59" width="83.4386" height="83.4386" transform="rotate(-45 0 59)" fill="#40424C"/><path d="M68.2258 75.368V45.0131C68.2258 44.0275 67.4259 43.2275 66.4402 43.2275H52.1556C51.1699 43.2275 50.37 44.0275 50.37 45.0131V75.368" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>                <path d="M50.3699 53.9409H43.2276C42.242 53.9409 41.442 54.7409 41.442 55.7265V75.3679" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>                <path d="M77.1537 75.3679V55.7265C77.1537 54.7409 76.3538 53.9409 75.3682 53.9409H68.2258" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M54.8339 68.2256H63.7618" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M61.9763 68.2256V75.3679" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M56.6195 75.3679V68.2256" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M55.7267 56.6194H62.869" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M55.7267 61.976H62.869" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M55.7267 51.2627H62.869" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.7988 61.976H50.37" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M46.7988 68.2256H50.37" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M68.2258 61.976H71.797" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M68.2258 68.2256H71.797" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/> <path d="M78.9393 75.3679H39.6565" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>',"application/xml");t.appendChild(t.ownerDocument.importNode(i.documentElement,!0)),t.className="marker",t.style.width=e.properties.icon.iconSize[0]+"px",t.style.height=e.properties.icon.iconSize[1]+"px",t.addEventListener("click",function(){window.location.href=this.getAttribute("data-href")}),Z.push(t),new mapboxgl.Marker(t).setLngLat(e.geometry.coordinates).addTo(G)});var K=0;if($(".structure__item").length>0){var ee=function(e){return G.flyTo({center:te[e],essential:!0}),G.fire("flystart"),e},te=[];$(".structure__item").each(function(e){Z[e].setAttribute("data-href",$(this).data("href")),null!=$(this).data("coordinates")&&te.push($(this).data("coordinates")),$(this).hover(function(){ee(e),K=ee(e)})}),G.on("moveend",function(e){if(Q){Z[K].classList.add("marker--active");for(var t=0;t<Z.length;t++)t!=K&&Z[t].classList.remove("marker--active");G.fire("flyend")}}),G.on("flystart",function(){Q=!0}),G.on("flyend",function(){Q=!1})}}if($(".form-project__field").exists&&$(".form-project__field").each(function(){var e=this;$(this).on("mousemove",function(){$(e).closest(".form-project__block").addClass("form-project__block--active")}),$(this).on("mouseleave",function(){$(e).is(":focus")||$(e).val()||$(e).closest(".form-project__block").removeClass("form-project__block--active")}),$(this).on("blur",function(){$(this).val()||$(this).closest(".form-project__block").removeClass("form-project__block--active")})}),$(".building-filter__wrp").length>0&&($(".building-filter__wrp").each(function(){$(this).on("click",function(){var e=$(this).parent().toggleClass("building-filter__case--active");$(this).closest(".building-filter__col").siblings().find(".building-filter__case").removeClass("building-filter__case--active"),$(".building-filter__case").each(function(t){$(this)[0]!=e[0]&&$(this)[0].classList.contains("building-filter__case--active")&&$(this)[0].classList.remove("building-filter__case--active")})}),$(this).next(".building-filter__select").mCustomScrollbar({theme:"minimal-dark",mouseWheelPixels:90})}),$(document).click(function(e){var t=$(".building-filter__case");e.target==t[0]||t.has(e.target).length||t.removeClass("building-filter__case--active")})),$(".filter-sort__wrp").length>0&&($(".filter-sort__wrp").each(function(){$(this).on("click",function(){$(this).parent().toggleClass("filter-sort__case--active")}),$(this).next(".filter-sort__select").mCustomScrollbar({theme:"dark",mouseWheelPixels:90})}),$(document).click(function(e){var t=$(".filter-sort__case");e.target==t[0]||t.has(e.target).length||t.removeClass("filter-sort__case--active")})),$(".filter-sort__unit").exists()&&$(".filter-sort__unit").each(function(){$(this).on("click",function(){$(".filter-sort__text").text($(this).text()),$(".filter-sort__case").removeClass("filter-sort__case--active"),$(this).find("input").data("period")})}),$(".building-filter__unit").length>0&&$(".building-filter__unit").each(function(){$(this).on("click",function(){$(this).closest(".building-filter__case").find(".building-filter__text").text($(this).text()),$(".building-filter__case").removeClass("building-filter__case--active")})}),$(".project-period__bloc").length>0&&$(".project-period__bloc").each(function(){$(this).on("click",function(){$(this).parent().toggleClass("project-period__box--active"),$(this).closest(".building-filter__col").siblings().find(".project-period__box").removeClass("project-period__box--active")})}),$(".project-period__slider").exists())try{var ie=new Swiper(".project-period__slider",{slidesPerView:"1",spaceBetween:40,effect:"fade",autoplay:{delay:5e3},fadeEffect:{crossFade:!0},pagination:{el:".inner-slider__num",type:"custom",renderCustom:function(e,t,i){return"<span>".concat((""+(t||0)).slice(-2),"</span>")+"/<span>".concat((""+i).slice(-2),"</span>")}},navigation:{nextEl:".inner-slider__link--next",prevEl:".inner-slider__link--prev"}})}catch(e){console.log(e)}if($(".project-period__unit").exists()&&$(".project-period__unit").each(function(){var e=0,t=0;$(this).on("click",function(){$(".project-period__text").text($(this).text()),$(".project-period__box").removeClass("project-period__box--active"),e=$(this).find("input").data("period"),$(".project-period__slider .swiper-slide").each(function(){if((t=$(this).data("slide"))==e)return ie.slideTo(t-1),!1})})}),$(document).click(function(e){var t=$(".project-period__box");e.target==t[0]||t.has(e.target).length||t.removeClass("project-period__box--active")}),$(".menu-content__inner").exists())try{$('a[href^="#"]').click(function(){var e=$(this).attr("href");$("html, body").animate({scrollTop:$(e).offset().top-130},600)});var oe={el_menu:".menu-content__inner:eq(0)",init:function(){oe.menu(),$(document).scroll(function(){oe.scolling()})},menu:function(){oe.links_arr=[],$(oe.el_menu+" a").each(function(e){if($(this).attr("href")&&-1!=$(this).attr("href").indexOf("#")){var t=$(this).attr("href").indexOf("#"),i=$(this).attr("href").length,o=$(this).attr("href").substr(t,i);oe.links_arr[e]=$(this).attr("href")+"::"+o}})},scolling:function(){oe.links_arr.forEach(function(e){var t=e.split("::");if(oe.inWindow(""+t[1]).length>0)return $(".menu-content__li").removeClass("menu-content__li--active"),$('a[href="'+t[0]+'"]').addClass("menu-content__li--active"),!1})},inWindow:function(e){var t=$(window).scrollTop()-70,i=$(window).height(),o=$(e),s=[];return o.each(function(){var e=$(this),o=e.offset();t<=o.top&&e.height()+o.top<t+i&&s.push(this)}),$(s)}};oe.init()}catch(e){console.log(e)}function se(e,t){if($(e).exists)try{var i=$(window),o=$(t),s=o.offset().top;i.on("scroll",function(){(window.pageYOffset||document.documentElement.scrollTop)>s?o.addClass("mf-fixed"):o.removeClass("mf-fixed")})}catch(e){console.log(e)}}function ne(e,t){var i=document.querySelector(e),o=t.slides.length,s=i.querySelectorAll(".swiper-menu");if(console.log(o),o>0)for(var n=0;n<s.length;n++)for(var r=0;r<o;r++){var a=document.createElement("div");a.classList.add("swiper-menu__item"),a.setAttribute("data-index",r),s[n].appendChild(a),0==r&&a.classList.add("swiper-menu__item--active")}}$(window).on("resize load",function(){$(this).width()>922&&se(".menu-content",".menu-content__inner")}),se(".structure__aside",".structure__inner"),$(".project-map__item").exists()&&$(".project-map__item").each(function(){$(this).on("click",function(){$(this).find("input").prop("checked",!0),$(this).find("input").is(":checked")&&$(this).addClass("project-map__item--active").siblings().removeClass("project-map__item--active")})}),$(".project-period__slider").exists()&&ne(".project-period__slider",ie),$(".project-period__slider .swiper-menu").on("click",".swiper-menu__item",function(){var e,t,i;e=ie,t=this,i=$(t).data("index"),e.slideTo(i),$(t).attr("index",i),console.log($(t).closest(".swiper-menu").find(".swiper-menu__item")),$(t).closest(".swiper-menu").find(".swiper-menu__item").each(function(){console.log($(this)),$(this).data("index")!=i?$(this).removeClass("swiper-menu__item--active"):$(this).addClass("swiper-menu__item--active")})})});